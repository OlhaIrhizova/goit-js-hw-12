{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":[" \nexport function createGallery(array) {\n    return array.map(item =>\n        `\n        <li class=\"gallery-item\">\n       <a class=\"gallery-link\" href=\"${item.largeImageURL}\">\n          <img\n            class=\"gallery-image\"\n            src = \"${item.webformatURL}\"\n            alt = \"${item.tags}\"\n            loading = \"lazy\"\n            width = \"360\"\n            />\n        </a>\n\n        <div class=\"info\">\n                    <p class=\"info-item\"><b>Likes ${item.likes}</b></p>\n                    <p class=\"info-item\"><b>Views ${item.views}</b></p>\n                    <p class=\"info-item\"><b>Comments ${item.comments}</b></p>\n                    <p class=\"info-item\"><b>Downloads ${item.downloads}</b></p>\n                </div>\n\n      </li> `\n    ).join('');\n\n}\n\nexport const showLoader = () => {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'block';\n};\n\n   export const hideLoader = () => {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'none';\n};\n\n\n","import axios from \"axios\";\n\nconst BASE_URL = \"https://pixabay.com/api/\"\nconst API_KEY = \"47417442-8de2b86208b2757b72fdcd518\";\n\n\n\n\nexport async function serviceImages(searchQuery, page = 1) {\n const params = new URLSearchParams({\n  \n                key: API_KEY,\n                q: searchQuery,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: \"true\",\n                page,\n                per_page: 15\n            })\n    try {\n        const { data } = await axios(BASE_URL, {params});\n        return { hits: data.hits, totalHits: data.totalHits };\n    }catch(error) {\n        console.error(\"Error fetching images:\", error)\n        return { hits: [], totalHits: 0 }; \n    }\n\n};\n\n\n\n\n\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from 'simplelightbox';\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { serviceImages } from './js/pixabay-api';\nimport { createGallery, showLoader, hideLoader} from './js/render-functions';\n\n\nconst searchForm = document.querySelector(\".search-form\");\nconst input = document.querySelector(\".search-input\");\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector(\".js-load-more\");\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\n\nlet page = 1;\nlet searchQuery = '';\nlet totalHits = 0; \nlet loadedHits = 0; \n\n\n\n function renderGallery(images) {\n     \n   gallery.innerHTML += createGallery(images);\n  \n\n \n  lightbox.refresh();\n}\n\nsearchForm.addEventListener(\"submit\", hendlerSearch);\n\n\nfunction hendlerSearch(event) {\n    event.preventDefault();\n   \n    searchQuery = input.value.trim();\n    page = 1;\n   \n    if (!searchQuery) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search term.',\n        });\n        return;\n    }\n   \n    showLoader();\n\n    gallery.innerHTML = '';\n    totalHits = 0; \n    loadedHits = 0; \n    loadMoreButton.classList.add('load-more-hidden');\n\n     \n\n\n    serviceImages(searchQuery,page)\n     .then(({ hits, totalHits: total }) => {\n         totalHits = total; \n         loadedHits = hits.length;\n\n            if (hits.length === 0) {\n                iziToast.error({\n                    title: 'Error',\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                });\n                return;\n            }\n         renderGallery(hits);\n         \n          if (loadedHits < totalHits) {\n                loadMoreButton.classList.remove('load-more-hidden');\n            } else {\n                iziToast.info({\n                    title: 'Info',\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                });\n            }\n        })\n        .catch(error => {\n            iziToast.error({\n                title: 'Error',\n                message: 'Something went wrong. Please try again later.',\n            });\n            console.error(error);\n        })\n        .finally(() => {\n            hideLoader(); \n        });\n}\n\nloadMoreButton.addEventListener(\"click\", onLoadMore);\n\nasync function onLoadMore() {\n\n     page += 1; \n    showLoader(); \n\n    try {\n        const { hits, totalHits: total } = await serviceImages(searchQuery, page);\n       loadedHits += hits.length;\n        \n\n        renderGallery(hits);\n\n\n        if (loadedHits >= total) {\n            loadMoreButton.classList.add('load-more-hidden');\n            iziToast.info({\n                title: 'Info',\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n        }\n\n        const item = document.querySelector(\".gallery-item\");\n        const itemHeigth = item.getBoundingClientRect().height;\n\n        window.scrollBy({\n            left: 0,\n            top: itemHeigth * 2,\n            behavior:\"smooth\"\n        })\n    \n        \n\n\n\n\n\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong. Please try again later.',\n        });\n        console.error(error);\n    } finally {\n        hideLoader();\n    }\n}\n\n\n"],"names":["createGallery","array","item","showLoader","loader","hideLoader","BASE_URL","API_KEY","serviceImages","searchQuery","page","params","data","axios","error","searchForm","input","gallery","loadMoreButton","lightbox","SimpleLightbox","totalHits","loadedHits","renderGallery","images","hendlerSearch","event","iziToast","hits","total","onLoadMore","itemHeigth"],"mappings":"owBACO,SAASA,EAAcC,EAAO,CACjC,OAAOA,EAAM,IAAIC,GACb;AAAA;AAAA,uCAE+BA,EAAK,aAAa;AAAA;AAAA;AAAA,qBAGpCA,EAAK,YAAY;AAAA,qBACjBA,EAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAOsBA,EAAK,KAAK;AAAA,oDACVA,EAAK,KAAK;AAAA,uDACPA,EAAK,QAAQ;AAAA,wDACZA,EAAK,SAAS;AAAA;AAAA;AAAA,aAItE,EAAM,KAAK,EAAE,CAEb,CAEO,MAAMC,EAAa,IAAM,CAC9B,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,MAAM,QAAU,OACzB,EAEgBC,EAAa,IAAM,CACjC,MAAMD,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,MAAM,QAAU,MACzB,ECjCME,EAAW,2BACXC,EAAU,qCAKT,eAAeC,EAAcC,EAAaC,EAAO,EAAG,CAC1D,MAAMC,EAAS,IAAI,gBAAgB,CAEpB,IAAKJ,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAAC,EACA,SAAU,EAC1B,CAAa,EACT,GAAI,CACA,KAAM,CAAE,KAAAE,CAAI,EAAK,MAAMC,EAAMP,EAAU,CAAC,OAAAK,CAAM,CAAC,EAC/C,MAAO,CAAE,KAAMC,EAAK,KAAM,UAAWA,EAAK,UAC7C,OAAME,EAAO,CACV,eAAQ,MAAM,yBAA0BA,CAAK,EACtC,CAAE,KAAM,CAAA,EAAI,UAAW,CAAC,CAClC,CAEL,CCnBA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAQ,SAAS,cAAc,eAAe,EAC9CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAiB,SAAS,cAAc,eAAe,EAEvDC,EAAW,IAAIC,EAAe,YAAY,EAGhD,IAAIV,EAAO,EACPD,EAAc,GACdY,EAAY,EACZC,EAAa,EAIhB,SAASC,EAAcC,EAAQ,CAE7BP,EAAQ,WAAajB,EAAcwB,CAAM,EAI1CL,EAAS,QAAO,CAClB,CAEAJ,EAAW,iBAAiB,SAAUU,CAAa,EAGnD,SAASA,EAAcC,EAAO,CAM1B,GALAA,EAAM,eAAc,EAEpBjB,EAAcO,EAAM,MAAM,OAC1BN,EAAO,EAEH,CAACD,EAAa,CACdkB,EAAS,MAAM,CACX,MAAO,QACP,QAAS,6BACrB,CAAS,EACD,MACH,CAEDxB,IAEAc,EAAQ,UAAY,GACpBI,EAAY,EACZC,EAAa,EACbJ,EAAe,UAAU,IAAI,kBAAkB,EAK/CV,EAAcC,EAAYC,CAAI,EAC5B,KAAK,CAAC,CAAE,KAAAkB,EAAM,UAAWC,CAAK,IAAO,CAI/B,GAHHR,EAAYQ,EACZP,EAAaM,EAAK,OAEXA,EAAK,SAAW,EAAG,CACnBD,EAAS,MAAM,CACX,MAAO,QACP,QAAS,0EAC7B,CAAiB,EACD,MACH,CACJJ,EAAcK,CAAI,EAEbN,EAAaD,EACXH,EAAe,UAAU,OAAO,kBAAkB,EAElDS,EAAS,KAAK,CACV,MAAO,OACP,QAAS,4DAC7B,CAAiB,CAEjB,CAAS,EACA,MAAMb,GAAS,CACZa,EAAS,MAAM,CACX,MAAO,QACP,QAAS,+CACzB,CAAa,EACD,QAAQ,MAAMb,CAAK,CAC/B,CAAS,EACA,QAAQ,IAAM,CACXT,GACZ,CAAS,CACT,CAEAa,EAAe,iBAAiB,QAASY,CAAU,EAEnD,eAAeA,GAAa,CAEvBpB,GAAQ,EACTP,IAEA,GAAI,CACA,KAAM,CAAE,KAAAyB,EAAM,UAAWC,CAAK,EAAK,MAAMrB,EAAcC,EAAaC,CAAI,EACzEY,GAAcM,EAAK,OAGlBL,EAAcK,CAAI,EAGdN,GAAcO,IACdX,EAAe,UAAU,IAAI,kBAAkB,EAC/CS,EAAS,KAAK,CACV,MAAO,OACP,QAAS,4DACzB,CAAa,GAIL,MAAMI,EADO,SAAS,cAAc,eAAe,EAC3B,sBAAqB,EAAG,OAEhD,OAAO,SAAS,CACZ,KAAM,EACN,IAAKA,EAAa,EAClB,SAAS,QACrB,CAAS,CAQJ,OAAQjB,EAAO,CACZa,EAAS,MAAM,CACX,MAAO,QACP,QAAS,+CACrB,CAAS,EACD,QAAQ,MAAMb,CAAK,CAC3B,QAAc,CACNT,GACH,CACL"}